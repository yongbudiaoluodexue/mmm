function productInformation(t){t||(t=0),$.ajax({type:"get",url:"http://139.199.157.195:9090/api/getbaicaijiaproduct?titleid="+t,beforeSend:function(){},success:function(t){obj=t,render()}})}function render(){var t={result:[]},e=6;obj.result.length<=e&&(e=obj.result.length);for(var n=0;n<e;n++)t.result.push(obj.result.shift());var o=template("product",t);$("#secCommodity").append(o),setScroll()}function setScroll(){window.onscroll=function(){var t=window.innerHeight,e=$("#secCommodity").outerHeight(!0),n=$("header").outerHeight(!0)+$("nav").outerHeight(!0),o=n+e-t;o-$(this).scrollTop()<50&&render()}}function navClick(){for(var t=document.querySelectorAll("#glideUl>li"),e=0;e<t.length;e++)t[e].onclick=function(){var e=document.querySelector("#secCommodity");e.innerHTML="",newResult={result:[]};for(var n=0;n<t.length;n++)t[n].style.borderBottom="0";this.style.borderBottom="3px solid #e4393c";var o=$(this).find("em").html();productInformation(o)}}function scroll(){return{top:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,left:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0}}function navAjax(){$.ajax({url:"http://139.199.157.195:9090/api/getbaicaijiatitle",success:function(t){var e=template("navTop",t);$("#glideUl").html(e);var n=document.getElementById("glide"),o=document.getElementById("glideUl"),l=document.querySelectorAll("#glideUl>li");glide(n,o,l),navClick()}})}function sectionStrip(){var t=$("#strip>.bar i span").html();$("div#strip .bar i>em").css("width",t)}function addRemove(){var t=!0;$("#nav_button").on("click",function(){t?(t=!1,$("#nav_button").removeClass("glyphicon glyphicon-menu-hamburger"),$("#nav_button").addClass("glyphicon glyphicon-remove"),$("#cabbageIndex").slideDown()):(t=!0,$("#nav_button").removeClass("glyphicon glyphicon-remove"),$("#nav_button").addClass("glyphicon glyphicon-menu-hamburger"),$("#cabbageIndex").slideUp())})}function glide(t,e,n){function o(t,e){t.style.transform="translateX("+e+"px)"}function l(t){t.style.transition="all .2s"}for(var i=0,r=0;r<n.length;r++)i+=$(n[r]).outerWidth(!0);e.style.width=i+"px";var c=t.offsetWidth-i,a=100,u=0,d=c,s=!1,f=0,m=0,p=0,v=0;e.addEventListener("touchstart",function(t){f=t.touches[0].pageX}),e.addEventListener("touchmove",function(t){s=!0,m=t.touches[0].pageX,p=m-f,v+p<=u+a&&v+p>=d-a&&o(e,p+v)}),window.addEventListener("touchend",function(){s&&(v+=p,v+p>=u?(l(e),o(e,u),v=0):v+p<=d-a-$("#nav_button").width()&&(l(e),o(e,d-$("#nav_button").width()),v=d)),s=!1,f=0,m=0,p=0})}function Index(){var t=!0,e=null;$(window).scroll(function(){t||clearInterval(e),t=!1}),$("#indexTop").on("click",function(){e=setInterval(function(){var n=$(window).scrollTop(),o=Math.floor(-n/8);0==n&&clearInterval(e),t=!0,$(window).scrollTop(n+o)},30)})}$(function(){function t(){navAjax(),addRemove(),productInformation(),setScroll(),Index()}t()});