$(function(){function t(){var t=!0,e=null;$(window).scroll(function(){t||clearInterval(e),t=!1}),$("#indexTop").on("click",function(){e=setInterval(function(){var a=$(window).scrollTop(),o=Math.floor(-a/8);0==a&&clearInterval(e),t=!0,$(window).scrollTop(a+o)},30)})}var e=document.getElementById("list");t();var a=window.location.search.replace("?categoryId=","");$.ajax({type:"get",data:{categoryid:a,pageid:1},url:"http://139.199.157.195:9090/api/getproductlist",success:function(t){var e=template("productionList",t);$("#productList").html(e)}}),$.ajax({type:"get",data:{categoryid:a},url:"http://139.199.157.195:9090/api/getproductlist",success:function(t){for(var e="",a=1;a<=Math.ceil(t.totalCount/t.pagesize);a++)e+="<option value="+a+">"+a+"/"+Math.ceil(t.totalCount/t.pagesize)+"</option>";$("#list").html(e)}});var o=1;$("#prev").on("click",function(){o--,e.value=o,$.ajax({type:"get",data:{categoryid:a,pageid:o},url:"http://139.199.157.195:9090/api/getproductlist",beforeSend:function(){if(o<1)return alert("已经是第一页了"),o=1,!1},success:function(t){var e=template("productionList",t);$("#productList").html(e),window.scrollTo(0,0)}})});var r=0,c=!1;$("#next").on("click",function(){o++,e.value=o,$.ajax({type:"get",data:{categoryid:a,pageid:o},url:"http://139.199.157.195:9090/api/getproductlist",beforeSend:function(){if(c){if(o>r)return alert("已经是最后一页了"),o=r,!1}else c=!0},success:function(t){var e=template("productionList",t);$("#productList").html(e),r=Math.ceil(t.totalCount/t.pagesize),window.scrollTo(0,0)}})}),e.onchange=function(){o=e.value,$.ajax({type:"get",data:{categoryid:a,pageid:e.value},url:"http://139.199.157.195:9090/api/getproductlist",success:function(t){var e=template("productionList",t);$("#productList").html(e),r=Math.ceil(t.totalCount/t.pagesize),c=!0}})},$("#nav li").on("click",function(){$("#nav li").removeClass("current"),$(this).addClass("current")}),$("#nav li:nth-of-type(1)").on("click",function(){$.ajax({type:"get",data:{categoryid:a,pageid:o},url:"http://139.199.157.195:9090/api/getproductlist",success:function(t){var e=function(t,e){var a=t.productQuote,o=e.productQuote,r=a.replace(/[^0-9]+/g,"");r=parseInt(r);var c=o.replace(/[^0-9]+/g,"");return c=parseInt(c),r<c?-1:r>c?1:0};t.result.sort(e);var a=template("productionList",t);$("#productList").html(a)}})}),$("#nav li:nth-of-type(2)").on("click",function(){$.ajax({type:"get",data:{categoryid:a,pageid:o},url:"http://139.199.157.195:9090/api/getproductlist",success:function(t){var e=function(t,e){var a=t.productCom,o=e.productCom,r=a.replace(/[^0-9]+/g,"");r=parseInt(r);var c=o.replace(/[^0-9]+/g,"");return c=parseInt(c),r<c?-1:r>c?1:0};t.result.sort(e);var a=template("productionList",t);$("#productList").html(a)}})}),$("#nav li:nth-of-type(3)").on("click",function(){$.ajax({type:"get",data:{categoryid:a,pageid:o},url:"http://139.199.157.195:9090/api/getproductlist",success:function(t){var e=function(t,e){var a=t.productPrice,o=e.productPrice,r=a.replace(/[^0-9]+/g,"");r=parseInt(r);var c=o.replace(/[^0-9]+/g,"");return c=parseInt(c),r<c?-1:r>c?1:0};t.result.sort(e);var a=template("productionList",t);$("#productList").html(a)}})})});